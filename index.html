<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ููุฒูุชู ุนูู ุญููุด - ุงูุนุฑูุถ ุงูุฃุณุจูุนูุฉ</title>
  <style>
    /* ... (ููุณ ุงูุชูุณููุงุช ุงูุชู ุฃุฑุณูุชูุง ุณุงุจููุง) ... */
  </style>
</head>
<body>
  <!-- ุงููุญุชูู ุงูุณุงุจู ููุง ูู ... -->

  <h1>โจ ููุฒูุชู ุนูู ุญููุด - ุงูุนุฑูุถ ุงูุฃุณุจูุนูุฉ โจ</h1>

  <!-- ูุณู ุงูุนุฑูุถ ูุงูุฎุตููุงุช -->
  <section class="offers" aria-label="ุนุฑูุถ ูุฎุตููุงุช">
    <h2>๐ฅ ุนุฑูุถ ูุฎุตููุงุช ุฎุงุตุฉ ููู ๐ฅ</h2>
    <ul>
      <li>ุฎุตู ุชุฑุญูุจู 10% ูุฃูู ุทูุจ ููู!</li>
      <li>ุงุดุชุฑู 1 ูุงุญุตู ุนูู ุงูุซุงูู ุจูุตู ุงูุณุนุฑ ุนูู ููุชุฌุงุช ูุฎุชุงุฑุฉ.</li>
      <li>ุดุญู ูุฌุงูู ุนูุฏ ุชุฌุงูุฒ ุงูุทูุจ 30,000 ุฏููุงุฑ.</li>
      <li>ููุจููุงุช ุฎุตู ุญุตุฑูุฉ ุนุจุฑ ุตูุญุชูุง ุนูู ุฅูุณุชุบุฑุงู.</li>
      <li>ุจุฑูุงูุฌ ููุงุก ูุน ููุงุท ููุงูุฃุฉ ููู ุนูููุฉ ุดุฑุงุก.</li>
    </ul>
  </section>

  <!-- ุนุฏุงุฏ ุงูุฒูุงุฑ -->
  <div class="visitors-counter">
    <span class="visitors-label">ุนุฏุฏ ุงูุฒูุงุฑ:</span>
    <span class="visitors-number">
      <div id="sfcc3snu2jjkbg4skqls6dseyujundlu97y"></div>
      <script type="text/javascript" src="https://counter1.optistats.ovh/private/counter.js?c=c3snu2jjkbg4skqls6dseyujundlu97y&down=async" async></script>
      <noscript>
        <a href="https://www.freecounterstat.com" title="website counter">
          <img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=c3snu2jjkbg4skqls6dseyujundlu97y" border="0" title="website counter" alt="website counter">
        </a>
      </noscript>
    </span>
  </div>

  <button id="showCartBtn" aria-label="ุนุฑุถ ุงูุณูุฉ">
    <span class="cart-icon" aria-hidden="true">๐</span> ุงูุณูุฉ
    <span id="cartCount" aria-live="polite" aria-atomic="true">0</span>
  </button>

  <div class="products" id="product-list" aria-live="polite" aria-atomic="true"></div>

  <!-- ูุงูุฐุฉ ุงูุณูุฉ -->
  <div class="modal" id="cartModal" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
    <div class="modal-content">
      <h3 id="cartTitle">ุณูุฉ ุงููุดุชุฑูุงุช</h3>
      <ul id="cartItems" style="padding-right:20px;list-style:decimal;"></ul>
      <div id="cartTotal" style="font-weight:bold;margin:10px 0;"></div>
      <hr>
      <input type="text" id="custName" placeholder="ุงูุงุณู" aria-label="ุงูุงุณู" />
      <input type="text" id="custAddress" placeholder="ุงูุนููุงู" aria-label="ุงูุนููุงู" />
      <input type="text" id="custPhone" placeholder="ุฑูู ุงููุงุชู" aria-label="ุฑูู ุงููุงุชู" />
      <input type="text" id="custLocation" placeholder="ุฑุงุจุท ุงูููููุดู (ุงุฎุชูุงุฑู)" aria-label="ุฑุงุจุท ุงูููููุดู (ุงุฎุชูุงุฑู)" />
      <div style="color:#c2185b; font-size:0.95em; margin-bottom:8px;">
        ๐ ููููู ุฅุฑุณุงู ุฑุงุจุท ุงูููููุดู ูู ุฎุฑุงุฆุท Google ุฃู ูุงุชุณุงุจ ููุงุ ุฃู ุฅุฑุณุงูู ูุงุญููุง.
      </div>
      <button onclick="submitCartOrder()" aria-label="ุฅุฑุณุงู ุงูุทูุจ ุนุจุฑ ูุงุชุณุงุจ">ุฅุฑุณุงู ุงูุทูุจ ุนุจุฑ ูุงุชุณุงุจ</button>
    </div>
  </div>

  <div class="toast" id="toast" role="alert" aria-live="assertive" aria-atomic="true">โ ุชู ุฅุฑุณุงู ุงูุทูุจ ุฅูู ูุงุชุณุงุจ</div>

  <div class="info-footer">
    โจ ููุฒูุชู ุนูู ุญููุด โจุฌูุงููู... ูุจุฏุฃ ูู ููุง! <br>
    ๐ ุฃููุงุช ุงูุนูู: ูู 10 ุตุจุงุญูุง ุญุชู 12 ูุณุงุกู <br>
    ๐ ุงูุชูุตูู ูุชููุฑ ูุฌููุน ููุงุทู ุงูุนุฑุงู <br>
    ๐ณ ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู <br>
  </div>
  <div class="social">
    <a href="https://wa.me/9647818004585" target="_blank" rel="noopener noreferrer">๐ฌ ูุงุชุณุงุจ</a>
    <a href="https://www.instagram.com/ali_honosh" target="_blank" rel="noopener noreferrer">๐ธ ุฅูุณุชุบุฑุงู</a>
    <a href="https://www.facebook.com/share/16UEZy9EHd/" target="_blank" rel="noopener noreferrer">๐ ููุณุจูู</a>
    <span style="margin:0 8px;">|</span>
    <a href="https://maps.app.goo.gl/Du52raCa55HjmACX8" target="_blank" rel="noopener noreferrer" title="ูููุนูุง ุงููุฑุน ุงูุงูู ุนูู ุงูุฎุฑูุทุฉ">๐ุงุงููุฑุน ุงูุฃูู</a>
    <a href="https://maps.app.goo.gl/Du52raCa55HjmACX8" target="_blank" rel="noopener noreferrer" title="ูููุนูุง ุงููุฑุน ุงูุซุงูู ุนู

ู ุงูุฎุฑูุทุฉ">๐ุงููุฑุน ุงูุซุงูู</a>
  </div>

  <script>
    // --- ุณูุฉ ุงููุดุชุฑูุงุช ---
    let cart = [];

    // ุงุณุชุฑุฌุงุน ุจูุงูุงุช ุงูุฒุจูู ูู LocalStorage
    window.onload = function() {
      if(localStorage.getItem("custName")) document.getElementById("custName").value = localStorage.getItem("custName");
      if(localStorage.getItem("custAddress")) document.getElementById("custAddress").value = localStorage.getItem("custAddress");
      if(localStorage.getItem("custPhone")) document.getElementById("custPhone").value = localStorage.getItem("custPhone");
      if(localStorage.getItem("custLocation")) document.getElementById("custLocation").value = localStorage.getItem("custLocation");
    };

    function addToCart(product) {
      let idx = cart.findIndex(p => p.name === product.name && p.price === product.price);
      if(idx > -1) {
        cart[idx].qty += 1;
      } else {
        product.qty = 1;
        cart.push(product);
      }
      updateCartCount();
      showToastMsg("ุชูุช ุฅุถุงูุฉ ุงูููุชุฌ ุฅูู ุงูุณูุฉ!");
    }

    function updateCartCount() {
      let totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
      document.getElementById("cartCount").textContent = totalQty;
    }

    function showCart() {
      if (cart.length === 0) {
        alert("ุงูุณูุฉ ูุงุฑุบุฉ.");
        return;
      }
      let itemsHtml = cart.map((item, i) =>
        `<li>
          <span class="product-name">${item.name}</span>
          <div class="buttons">
            <button class="cart-qty-btn horizontal-btn" onclick="changeQty(${i}, -1)" aria-label="ุฅููุงุต ูููุฉ ${item.name}">-</button>
            <span style="font-weight:bold; margin: 0 8px;">${item.qty}</span>
            <button class="cart-qty-btn horizontal-btn" onclick="changeQty(${i}, 1)" aria-label="ุฒูุงุฏุฉ ูููุฉ ${item.name}">+</button>
            <button class="cart-remove-btn horizontal-btn" onclick="confirmRemove(${i})" aria-label="ุญุฐู ${item.name} ูู ุงูุณูุฉ">โ</button>
          </div>
        </li>`
      ).join('');
      document.getElementById("cartItems").innerHTML = itemsHtml;

      let total = cart.reduce((sum, item) => sum + (Number(item.price.replace(/[^\d.]/g, "")) * item.qty), 0);
      let totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
      document.getElementById("cartTotal").innerHTML = `ุงููุฌููุน ุงูููู: <span style="color:#d81b60">${total} ุฏููุงุฑ</span> | ุนุฏุฏ ุงูููุชุฌุงุช: <span style="color:#c2185b">${totalQty}</span>`;

      document.getElementById("cartModal").style.display = "flex";
    }

    function changeQty(index, delta) {
      cart[index].qty += delta;
      if(cart[index].qty < 1) cart[index].qty = 1;
      updateCartCount();
      showCart();
    }

    function confirmRemove(index) {
      if(confirm("ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูููุชุฌ ูู ุงูุณูุฉุ")) {
        cart.splice(index, 1);
        updateCartCount();
        showCart();
      }
    }

    function submitCartOrder() {
      const name = document.getElementById("custName").value.trim();
      const address = document.getElementById("custAddress").value.trim();
      const phone = document.getElementById("custPhone").value.trim();
      const location = document.getElementById("custLocation").value.trim();
      if (!name || !address || !phone) {
        alert("ูุฑุฌู ููุก ุฌููุน ุงูุญููู (ูุง ุนุฏุง ุงูููููุดู ุงุฎุชูุงุฑู).");
        return;
      }
      localStorage.setItem("custName", name);
      localStorage.setItem("custAddress", address);
      localStorage.setItem("custPhone", phone);
      localStorage.setItem("custLocation", location);

      let msg = "ุทูุจ ููุชุฌุงุช:\n";
      cart.forEach((item, i) => {
        msg += `${i+1}- ${item.name} - ${item.price} ร ${item.qty}\n`;
      });
      let total = cart.reduce((sum, item) => sum + (Number(item.price.replace(/[^\d.]/g, "")) * item.qty), 0);
      msg += `ุงููุฌููุน ุงูููู: ${total} ุฏููุงุฑ\n`;
      msg += `ุงูุงุณู: ${name}\nุงูุนููุงู: ${address}\nุงููุงุชู: ${phone}`;
      if(location) msg += `\nุงูููููุดู: ${location}`;
      const encoded = encodeURIComponent(msg);
      window.open(`https://wa.me/9647818004585?text=${encoded}`, '_blank');
      cart = [];updateCartCount();
      document.getElementById("cartModal").style.display = "none";
      showToastMsg("โ ุชู ุฅุฑุณุงู ุงูุทูุจ ุฅูู ูุงุชุณุงุจ");
    }

    function showToastMsg(txt) {
      const toast = document.getElementById("toast");
      toast.textContent = txt;
      toast.style.display = "block";
      setTimeout(() => { toast.style.display = "none"; }, 4000);
    }

    window.onclick = function (e) {
      if (e.target.id === "cartModal") {
        document.getElementById("cartModal").style.display = "none";
      }
    };

    document.getElementById("showCartBtn").onclick = showCart;

    // ุฏุงูุฉ ูุชุญููู ุฑูุงุจุท Google Drive ุฅูู ุฑูุงุจุท ูุจุงุดุฑุฉ ููุนุฑุถ
    function getDirectImageUrl(url) {
      if (url.includes("drive.google.com")) {
        let id = "";
        if (url.includes("/file/d/")) {
          id = url.split("/file/d/")[1].split("/")[0];
        } else if (url.includes("open?id=")) {
          id = url.split("open?id=")[1].split("&")[0];
        }
        if (id) {
          return `https://drive.google.com/uc?export=view&id=${id}`;
        }
      }
      return url;
    }

    // ุฌูุจ ุงูุจูุงูุงุช ูู Google Sheets ุนุจุฑ OpenSheet API
    fetch("https://opensheet.vercel.app/1GBEvznLdxcXqAHimMliEIBE2faqDJO4OFt8buWGD3y8/Sheet1")
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("product-list");
        data.forEach(item => {
          const card = document.createElement("div");
          card.className = "product";
          if ((item["ุงูุณุนุฑ"] || "").trim() === "ูุฏูุฉ") {
            card.classList.add("gift-effect");
          }
          let url = item["ุงูุตูุฑุฉ"] ? item["ุงูุตูุฑุฉ"].trim() : "";

          url = getDirectImageUrl(url);

          let mediaContent = "";

          if (url.includes("youtube.com") || url.includes("youtu.be")) {
            let videoId = "";
            if (url.includes("v=")) {
              videoId = url.split("v=")[1].split("&")[0];
            } else if (url.includes("youtu.be/")) {
              videoId = url.split("youtu.be/")[1].split("?")[0];
            }
            mediaContent = `<iframe width="100%" height="200" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>`;
          }
          else if (url.toLowerCase().endsWith(".mp4") || url.includes("drive.google.com/uc?export=view&id=")) {
            // ุงูุชุนุฏูู ููุง ูุนุฑุถ ุงูููุฏูู ูุน autoplay ู loop ู muted ู ุชุดุบูู ุงูุตูุช ุนูุฏ ุงูููุฑ
            const videoId = `video_${item["ุงูุงุณู"].replace(/\s+/g, '_')}`;
            mediaContent = `
              <video id="${videoId}" autoplay loop muted playsinline width="100%" height="200px" preload="metadata" style="cursor:pointer;">
                <source src="${url}" type="video/mp4">
                ูุชุตูุญู ูุง ูุฏุนู ุนุฑุถ ุงูููุฏูู.
              </video>
              <script>
                (function() {
                  const video = document.getElementById("${videoId}");
                  if(video) {
                    video.addEventListener("click", () => {
                      video.muted = !video.muted;
                    });
                  }
                })();
              </script>
            `;
          }
          else if (url.match(/\.(jpeg|jpg|gif|png|webp)$/i) || url.includes("drive.google.com/uc?export=view&id=")) {
            mediaContent = `<img src="${url}" alt="${item["ุงูุงุณู"] || ""}" loading="lazy" />`;
          }
          else {
            mediaContent = `<div style="height:200px; display:flex; align-items:center; justify-content:center; background:#eee; color:#999;">ูุง ุชูุฌุฏ ุตูุฑุฉ</div>`;
          }

          const shortDesc = (item["ุงููุตู"] || "").slice(0, 60);
          const fullDesc = item["ุงููุตู"] || "";

          let badge = "";
          if(item["ุดุงุฑุฉ"] && item["ุดุงุฑุฉ"].trim() !== "") {
            badge = `<span class="badge">${item["ุดุงุฑุฉ"]}</span>`;
          }

          card.innerHTML = `
            ${badge}
            ${mediaContent}
            <div class="product-info">
              <h2>${item["ุงูุงุณู"] || "ููุชุฌ ุจุฏูู ุงุณู"}</h2>
              <p class="price">
                ${item["ุงูุณุนุฑ"] === "ูุฏูุฉ" ? '๐ <b style="color:#d81b60;">ูุฏูุฉ ูุฌุงููุฉ!</b>' : item["ุงูุณุนุฑ"] || ""}
              </p>
              <p class="desc">
                <span class="short-desc">${shortDesc}...</span>
                <span class="full-desc" style="display:none;">${fullDesc}</span>
                <span class="more-link" onclick="
                  const s = this.previousElementSibling.previousElementSibling;
                  const f = this.previousElementSibling;
                  s.style.display='none';
                  f.style.display='inline';
                  this.style.display='none';
                ">ุงููุฒูุฏ</span>
              </p>
              <button class="order-btn" onclick="addToCart({name: '${(item["ุงูุงุณู"] || "").replace(/'/g, "\\'")}', price: '${(item["ุงูุณุนุฑ"] || "").replace(/'/g, "\\'")}'})" aria-label="ุฃุถู ${item["ุงูุงุณู"] || "ููุชุฌ"} ุฅูู ุงูุณูุฉ">๐ ุฃุถู ุฅูู ุงูุณูุฉ</button>
            </div>
          `;

          container.appendChild(card);
        });
      })
      .catch(err => {
        console.error('Error loading data:', err);
        alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูููุชุฌุงุช. ูุฑุฌู ุงููุญุงููุฉ ูุงุญููุง.");
      });
  </script>

</body>
</html>

---

ุฅุฐุง ุฃุฑุฏุช ุฃู ุชุนุฏูู ุฅุถุงูู ุฃู ุดุฑุญ ูุฃู ุฌุฒุกุ ุฃูุง ููุง ูููุณุงุนุฏุฉ!
